name: Deploy to Yandex Cloud Object Storage

on:
    push:
        branches:
            - main

jobs:
    deploy:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@v3
          - name: Deploy to Bucket
            run: |
                ls -la
                pwd
                aws --endpoint-url=https://storage.yandexcloud.net/ s3 cp --recursive ./ s3://smorodinovwork

          - name: Deploy to Yandex Cloud Object Storage
            uses: paulvstrashnov/yandex-s3-upload-action@main
            with:
              accessKeyId: ${{ secrets.YANDEX_CLOUD_ACCESS_KEY_ID }}
              secretAccessKey: ${{ secrets.YANDEX_CLOUD_SECRET_ACCESS_KEY }}
              bucket: ${{ secrets.YANDEX_CLOUD_BUCKET_NAME }}
              localPath: "./slides"
              remotePath: "./slides"

